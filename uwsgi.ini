[uwsgi]
# Basic uWSGI configuration
module = run:app
master = true
processes = 2
threads = 1

# Socket configuration
http-socket = :8080

# Enable cheaper and idle modes for dynamic scaling
cheaper = 2
cheaper-initial = 2
cheaper-step = 1
idle = 600
die-on-idle = true

# Logging
logto = app.log
log-date = true
log-4xx = true
log-5xx = true

# Kubernetes specific settings
# Enable touch-reload to allow rolling updates in Kubernetes
touch-reload = /tmp/reload

# Health check
http = :8080
http-route = ^/healthz health:

# Resource limits and requests (adjust as needed)
memory-report = true
limit-as = 256